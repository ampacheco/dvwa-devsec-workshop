name: ðŸš€ðŸš€ Basic ðŸ‘¨â€ðŸ’»Dev - SecðŸª² OpsðŸ“‰  Workflow ðŸš€ðŸš€  
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
    
  dast:
    runs-on: ubuntu-latest
    needs: deploy
    
    steps:
    - name: âœ… Checkout
      uses: actions/checkout@v2

    - name: âœ… DAST
      run: | 
        env | grep -E "GITHUB_ACTIONS|GITHUB_RUN_NUMBER|GITHUB_REF_NAME|GITHUB_SHA" > /tmp/env
        docker pull registry.fortidevsec.forticloud.com/fdevsec_dast:latest
        docker run --rm --env-file /tmp/env --mount type=bind,source=$PWD,target=/scan registry.fortidevsec.forticloud.com/fdevsec_dast:latest
